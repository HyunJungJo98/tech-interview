# XSS란

Cross Site Scription

웹 어플리케이션 취약점 중 하나로, 관리자가 아닌 권한이 없는 사용자가 웹 사이트에 스크립트를 삽입하는 공격 기법이다.

악의적으로 스크립크를 삽입하여 이를 열람한 사용자의 쿠키를 해커에게 전송시키며, 이 탈취한 쿠키를 통해 세션 하이재킹 공격을 한다. 탈취된 세션ID를 가진 쿠키로 해커가 사용자의 계정에 로그인한다.

# 공격 기법

1. **지속성** : 말 그대로 지속적으로 피해를 입히는 유형이다. XSS 취약점이 존재하는 웹 어플리케이션에 악성 스크립트를 삽입한다. 이를 열람한 사용자의 쿠키를 탈취하거나 리다이렉션 시키는 공격을 한다. 이때 삽입된 스크립트를 데이터베이스에 저장시켜 지속적으로 공격을 한다. Persistent XSS라고도 불린다.
2. **반사형** : 사용자에게 입력 받은 값을 서버에서 되돌려주는 곳에서 발생한다. 공격자는 악의 스크립트와 함께 URL을 사용자에게 누르도록 유도하고, 누른 사용자는 이 스크립트가 실행되어 공격을 당하게 되는 유형이다.
3. **DOM 기반** : 악성 스크립트가 포함된 URL을 사용자가 요청하게 되면서 브라우저를 해석하는 단계에서 발생하는 공격이다. 이 스크립트로 인해 클라이언트 측 코드가 원래 의도와 다르게 실행된다. 이는 다른 XSS 공격과는 달리 서버 측에서 탐지가 어렵다.

# 대응 기법

1. 입출력 값 검증 : XSS Cheat Sheet에 대한 필터 목록을 만들어 모든 Cheat Sheet에 대한 대응을 가능하도록 사전에 대비한다. XSS 필터링을 적용 후 스크립트가 실행되는지 직접 테스트 과정을 거쳐볼 수도 있다.
2. XSS 방어 라이브러리, 확장앱 : Anti XSS 라이브러리를 서버단에 추가한다. 사용자들은 각자 브라우저에서 악성 스크립트가 실행되지 않도록 확장앱을 설치하여 방어할 수 있다.
3. 웹 방화벽
4. CORS, SOP 설정 : CORS(Cross-Origin Resource Sharing), SOP(Same-Origin-Policy)를 통해 리소스의 Source를 제한한다. 사전에 지정된 도메인이나 범위가 아니라면 리소스를 가져올 수 없게 제한하여 공격 성공을 어렵게 한다.

# 참고

- [https://github.com/gyoogle/tech-interview-for-developer/blob/master/Web/CSRF %26 XSS.md](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Web/CSRF%20%26%20XSS.md)
